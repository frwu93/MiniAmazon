{% extends "base.html" %}

{% block content %}

<html>

<head>
    <link rel="stylesheet" type="text/css" href="bootstrap-4.5.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="profile.css">
</head>

<body>
    <div>
        <div class="row">
            <div class="col-md-3 mt-1">
                <div class="card text-center sidebar">
                    <div class="card-body">
                        <img src="https://users.cs.duke.edu/~junyang/media/portrait.jpg" class="rounded-circle"
                            width="150">
                        <div class="mt-3">
                            <h3>{{user.firstname}} {{user.lastname}}</h3>
                            <p>Account ID: {{user.id}}</p>
                            <hr>
                            <div class="tabs">
                                <a href="">Account Details</a>
                                <hr>
                                <a href="{{ url_for('users.publicUserProducts', id=user.id) }}">Their Products</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8 mt-1">
                <div class="card mb-3 content">
                    <h1 class="m-3 pt-3">About</h1>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <h5>First Name</h5>
                            </div>
                            <div class="col-md-9 text-secondary">
                                {{user.firstname}} 
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-3">
                                <h5>Last Name</h5>
                            </div>
                            <div class="col-md-9 text-secondary">
                                {{user.lastname}}
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-md-3">
                                <h5>Email</h5>
                            </div>
                            <div class="col-md-9 text-secondary">
                                {{user.email}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="reviews" class="row mt-2">
        <div class="col-12">
        <h1>Reviews</h1>
        </div>
        <div class="card-columns">
            {% if reviews %}
            {% for review in reviews %}
            <div class="card p-3">
                <blockquote class="blockquote mb-0 card-body">
                    <p>{{ review.description}}</p>
                    <footer class="blockquote-footer">
                        <small class="text-muted">
                            <cite title="User">Buyer # {{ review.buyer_id }}</cite> gave this seller {{ review.rating }} <cite> stars </cite>
                        </small>
                    </footer>
                </blockquote>
            </div>
            {% endfor %}
            {% endif %}
        </div>
    </div>
    
    <div class="col">
        {% if current_user_review %}
        <h1>My Current Review</h1>
            <div class="card">
                <blockquote class="blockquote mb-0 card-body">
                    <p>{{ current_user_review.description}}</p>
                    <footer class="blockquote-footer">
                        <small class="text-muted">
                            <cite title="User"></cite> My current review: {{ current_user_review.rating }}
                        </small>
                    </footer>
                    <form action="" method="post" novalidate>
                        {{ form2.hidden_tag() }}
                        {{ form2.submit(class_="btn btn-black") }}
                    </form>
                </blockquote>
            </div>
            
    </div>
    
     <!-- Product Review -->
    
      
     <form action="" method="post" novalidate>
       {{ form.hidden_tag() }}
       <p>
         {{ form.rating.label }}<br/>
         {{ form.rating(size=1) }}<br/>
         {% for error in form.rating.errors %}
         <span style="color: red;">[{{ error }}]</span>
         {% endfor %}
       </p>
       <p>
         {{ form.description.label }}<br/>
         {{ form.description(size=96) }}<br/>
         {% for error in form.description.errors %}
         <span style="color: red;">[{{ error }}]</span>
         {% endfor %}
       </p>
       {{ form.submit(class_="btn btn-black") }}
     </form>
    
     {% endif %}
    
    
</body>

</html>



{% endblock %}
